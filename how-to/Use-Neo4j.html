<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="../about.html" /><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="How to Check Referential Integrity" href="Check-Referential-Integrity.html" /><link rel="prev" title="How to query Solr using the Command Line" href="Query-Solr-using-CLI.html" />

    <link rel="shortcut icon" href="https://linkml.io/uploads/linkml-logo_color-no-words.png"/><!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>How to use Neo4J with LinkML-Store - linkml-store documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">linkml-store  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="https://linkml.io/uploads/linkml-logo_color.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">linkml-store  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/Command-Line-Tutorial.html">Tutorial: Using the Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/Python-Tutorial.html">Tutorial: Using the Python API</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">How-To Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of How-To Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Use-MongoDB.html">How to use MongoDB with LinkML-Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="Use-Semantic-Search.html">How to use Semantic Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="Query-the-Monarch-KG.html">How to query the Monarch-KG</a></li>
<li class="toctree-l2"><a class="reference internal" href="Query-Solr-using-CLI.html">How to query Solr using the Command Line</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">How to use Neo4J with LinkML-Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="Check-Referential-Integrity.html">How to Check Referential Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="Store-an-Ontology.html">Example: Storing an ontology</a></li>
<li class="toctree-l2"><a class="reference internal" href="Index-Phenopackets.html">How to index Phenopackets with LinkML-Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="Index-GO-CAMs.html">How to index GO-CAMs with LinkML-Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="Predict-Missing-Data.html">How to predict missing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Perform-RAG-Inference.html">Perform RAG Inference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/linkml_store.api.html">API</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.html">Adapters</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Adapters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.duckdb.html">linkml_store.api.stores.duckdb package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.duckdb package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.duckdb.duckdb_collection.html">linkml_store.api.stores.duckdb.duckdb_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.duckdb.duckdb_database.html">linkml_store.api.stores.duckdb.duckdb_database module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.duckdb.mappings.html">linkml_store.api.stores.duckdb.mappings module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.mongodb.html">linkml_store.api.stores.mongodb package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.mongodb package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.mongodb.mongodb_collection.html">linkml_store.api.stores.mongodb.mongodb_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.mongodb.mongodb_database.html">linkml_store.api.stores.mongodb.mongodb_database module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.filesystem.html">linkml_store.api.stores.filesystem package</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.filesystem package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.filesystem.filesystem_collection.html">linkml_store.api.stores.filesystem.filesystem_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.filesystem.filesystem_database.html">linkml_store.api.stores.filesystem.filesystem_database module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.solr.html">linkml_store.api.stores.solr package</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.solr package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.solr.solr_collection.html">linkml_store.api.stores.solr.solr_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.solr.solr_database.html">linkml_store.api.stores.solr.solr_database module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.solr.solr_utils.html">linkml_store.api.stores.solr.solr_utils module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.hdf5.html">linkml_store.api.stores.hdf5 package</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.hdf5 package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.hdf5.hdf5_collection.html">linkml_store.api.stores.hdf5.hdf5_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.hdf5.hdf5_database.html">linkml_store.api.stores.hdf5.hdf5_database module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/linkml_store.api.stores.chromadb.html">linkml_store.api.stores.chromadb package</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of linkml_store.api.stores.chromadb package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.chromadb.chromadb_collection.html">linkml_store.api.stores.chromadb.chromadb_collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/linkml_store.api.stores.chromadb.chromadb_database.html">linkml_store.api.stores.chromadb.chromadb_database module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/how-to/Use-Neo4j.ipynb.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="How-to-use-Neo4J-with-LinkML-Store">
<h1>How to use Neo4J with LinkML-Store<a class="headerlink" href="#How-to-use-Neo4J-with-LinkML-Store" title="Link to this heading"></a></h1>
<p>This how-to guide shows you how to use linkml-store over a Neo4j database. linkml-store is a flexible framework that can be used with different backends, employing simple mappings via LinkML schemas.</p>
<p>One of the main use cases here is being able to provide a schema for validating a property graph database, as well as making it easier to map between a property graph database and other representations (tabular/dataframe, JSON/YAML, RDF, RDFstar, OWL, …)</p>
<p>We will try and use some of the same examples as in <a class="reference external" href="https://neo4j.com/docs/getting-started/appendix/graphdb-concepts/">neo4j graph concepts guide</a>, making a simple Movie-oriented KG:</p>
<img alt="neo4j graph concepts" src="../_images/graph_simple-arr.svg" />
<section id="Running-this-how-to-guide-interactively.">
<h2>Running this how-to guide interactively.<a class="headerlink" href="#Running-this-how-to-guide-interactively." title="Link to this heading"></a></h2>
<p>This guide is both documentation, and a Jupyter notebook.</p>
<p>You can run the notebook locally. You will need a local neo4j database running, with authentication disabled.</p>
<p>One way to do this is via Docker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run
<span class="w">  </span>--name<span class="w"> </span>myneo4j
<span class="w">  </span>--publish<span class="w"> </span><span class="m">7474</span>:7474
<span class="w">  </span>--publish<span class="w"> </span><span class="m">7687</span>:7687
<span class="w">  </span>--volume<span class="w"> </span><span class="nv">$HOME</span>/neo4j/data/:/data
<span class="w">  </span>--volume<span class="w"> </span><span class="nv">$HOME</span>/neo4j/logs/:/logs
<span class="w">  </span>-e<span class="w"> </span><span class="nv">NEO4J_AUTH</span><span class="o">=</span>none
<span class="w">  </span>neo4j
</pre></div>
</div>
<p><strong>IMPORTANT NOTE</strong> if you run this Notebook locally, it will overwrite the default <code class="docutils literal notranslate"><span class="pre">neo4j</span></code>. If you have the enterprise edition you can modify this notebook to use a different database.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linkml_store</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Ensure the database is empty, then connect</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">attach_database</span><span class="p">(</span><span class="s2">&quot;neo4j&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">attach_database</span><span class="p">(</span><span class="s2">&quot;neo4j&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Using-a-schema">
<h2>Using a schema<a class="headerlink" href="#Using-a-schema" title="Link to this heading"></a></h2>
<p>It is not necessary to defined a LinkML schema in advance, but this has a lot of advantages:</p>
<ul class="simple">
<li><p>validation</p></li>
<li><p>clarity for producers and consumers</p></li>
<li><p>declarative mappings and graph projections</p></li>
</ul>
<p>We’ll use a predefined one here. You can see the source schemasheet <a class="reference external" href="https://docs.google.com/spreadsheets/d/1oMrzA41tg_nisdWInnqKJrcvv30dOXuwAhznJYYPSB8/edit?gid=1499822522#gid=1499822522">here</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">load_schema_view</span><span class="p">(</span><span class="s2">&quot;input/movies_kg/schema.yaml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next we’ll visualization this using PlamtUML</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
gen-plantuml<span class="w"> </span>--directory<span class="w"> </span>input/movies_kg/diagrams<span class="w"> </span>input/movies_kg/schema.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:root:File &#34;schema.yaml&#34;, line 36, col 15: Unrecognized prefix: rdf
</pre></div></div>
</div>
<img alt="UML Schema" src="../_images/MoviesKG.svg" />
<p>Note that this is in many respects a “normal” UML type schema, with classes and class relationships.</p>
<p>Here we define to base classes <code class="docutils literal notranslate"><span class="pre">Node</span></code> and <code class="docutils literal notranslate"><span class="pre">Edge</span></code>. We are treating edges as first-class entities in the model. We are following conventions and using <code class="docutils literal notranslate"><span class="pre">subject</span></code> and <code class="docutils literal notranslate"><span class="pre">object</span></code> for the head and tail nodes.</p>
<p>You don’t <em>need</em> to define your schema this way. In fact it’s possible to map <strong>any</strong> LinkML schema to a property graph. You don’t need classes like “Node” and “Edge”, and you don’t need a reification type model.</p>
<p>But having this kind of “explicit” model is easiest to make the relationship to Neo4J easier to grok.</p>
</section>
<section id="Create-Node-and-Edge-collections">
<h2>Create Node and Edge collections<a class="headerlink" href="#Create-Node-and-Edge-collections" title="Link to this heading"></a></h2>
<p>We create two collections, one for nodes, and one for edges.</p>
<p>Note: you can organize collections how you like - you could have multiple node collections, (e.g. different collections for persons, movies), and multiple edge collections. However, you can’t mix nodes and edges in one collection.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node_collection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="n">recreate_if_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">edge_collection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="s2">&quot;Edge&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="n">recreate_if_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It’s necessary to provide some kind of mechanism to indicate which collections are edge collections. This can be inferred from the schema, but here will will make it explicit.</p>
<p>We’ll use a default edge projections, which assigns special meaning to <code class="docutils literal notranslate"><span class="pre">subject</span></code>, <code class="docutils literal notranslate"><span class="pre">predicate</span></code>, and <code class="docutils literal notranslate"><span class="pre">object</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linkml_store.graphs.graph_map</span> <span class="kn">import</span> <span class="n">EdgeProjection</span>

<span class="n">edge_collection</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">graph_projection</span> <span class="o">=</span> <span class="n">EdgeProjection</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="Adding-Data">
<h2>Adding Data<a class="headerlink" href="#Adding-Data" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For convenience, we assign constants for each of the identifiers in the database</span>
<span class="n">TH</span> <span class="o">=</span> <span class="s2">&quot;ACTOR:TH&quot;</span>
<span class="n">RZ</span> <span class="o">=</span> <span class="s2">&quot;ACTOR:RZ&quot;</span>
<span class="n">FG</span> <span class="o">=</span> <span class="s2">&quot;MOVIE:FG&quot;</span>
<span class="n">BTTF</span> <span class="o">=</span> <span class="s2">&quot;MOVIE:BTTF&quot;</span>
<span class="n">FGC</span> <span class="o">=</span> <span class="s2">&quot;CHARACTER:FGC&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">persons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">TH</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Actor&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tom Hanks&quot;</span><span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">RZ</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Director&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Robert Zemekis&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">movies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">FG</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Movie&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Forest Gump&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">characters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">FGC</span><span class="p">,</span><span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Character&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Forest Gump (Character)&quot;</span><span class="p">},</span>
<span class="p">]</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edges</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">RZ</span><span class="p">,</span> <span class="s2">&quot;predicate&quot;</span><span class="p">:</span> <span class="s2">&quot;Directed&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">FG</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">TH</span><span class="p">,</span> <span class="s2">&quot;predicate&quot;</span><span class="p">:</span> <span class="s2">&quot;ActedIn&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">FG</span><span class="p">,</span> <span class="s2">&quot;plays&quot;</span><span class="p">:</span> <span class="n">FGC</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this to experiment with different ways of adding</span>
<span class="n">ADD_INDIVIDUALLY</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">ADD_INDIVIDUALLY</span><span class="p">:</span>
    <span class="n">node_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">persons</span><span class="p">)</span>
    <span class="n">node_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">movies</span><span class="p">)</span>
    <span class="n">node_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">characters</span><span class="p">)</span>
    <span class="n">edge_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">g</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="n">persons</span> <span class="o">+</span> <span class="n">movies</span> <span class="o">+</span> <span class="n">characters</span><span class="p">,</span>
        <span class="s2">&quot;edges&quot;</span><span class="p">:</span> <span class="n">edges</span>
    <span class="p">}</span>
    <span class="n">db</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Visualization">
<h2>Visualization<a class="headerlink" href="#Visualization" title="Link to this heading"></a></h2>
<p>We will visualize the whole database using py2neo, networkx, and matplotlib. This is not as visually attractive as the native neo4j UI but it works better in a notebook:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">linkml_store.utils.neo4j_utils</span> <span class="kn">import</span> <span class="n">draw_neo4j_graph</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">draw_neo4j_graph</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Visualization of simple subset&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/how-to_Use-Neo4j_21_0.png" src="../_images/how-to_Use-Neo4j_21_0.png" />
</div>
</div>
<p>Note this doesn’t display edge properties (e.g. the “plays” edge property between Tom Hanks and Forrest Gump</p>
<section id="Exploring-in-Neo4j">
<h3>Exploring in Neo4j<a class="headerlink" href="#Exploring-in-Neo4j" title="Link to this heading"></a></h3>
<p>If we go on over to <a class="reference external" href="http://localhost:7474/browser/">http://localhost:7474/browser/</a> (if you are running this locally) you can see this in the normal UI:</p>
<img alt="neo4j screenshot of single edge" src="../_images/neo4j-screenshot-1.png" />
</section>
</section>
<section id="Validation">
<h2>Validation<a class="headerlink" href="#Validation" title="Link to this heading"></a></h2>
<p>One of the main use cases for LinkML and LinkML-Store is validation using a schema. Most of the rich features of LinkML validation are available for property graphs, we will illustrate some simple ones here.</p>
<section id="Validating-an-existing-database">
<h3>Validating an existing database<a class="headerlink" href="#Validating-an-existing-database" title="Link to this heading"></a></h3>
<p>First we’ll validate the database. Note that by default, validation is retrospective; it’s possible to insert invalid data into the database.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">errs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">iter_validate_database</span><span class="p">())</span>
<span class="n">errs</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[]
</pre></div></div>
</div>
<p>Good, no errors!</p>
</section>
<section id="Prospective-Validation">
<h3>Prospective Validation<a class="headerlink" href="#Prospective-Validation" title="Link to this heading"></a></h3>
<p>We can switch on prospective validation, to prevent any future modifications making the data invalid:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_collection</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">validate_modifications</span> <span class="o">=</span> <span class="kc">True</span>
<br/></pre></div>
</div>
</div>
<p>Let’s test this out by inserting deliberately invalid data – making up an edge property not defined in the schema</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">edge_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span> <span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">RZ</span><span class="p">,</span> <span class="s2">&quot;predicate&quot;</span><span class="p">:</span> <span class="s2">&quot;Directed&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">BTTF</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="mi">1985</span><span class="p">})</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got an exception (we expect this!!!)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Got an exception (we expect this!!!)
Validation errors: [ValidationResult(type=&#39;jsonschema validation&#39;, severity=&lt;Severity.ERROR: &#39;ERROR&#39;&gt;, message=&#34;Additional properties are not allowed (&#39;date&#39; was unexpected) in /&#34;, instance={&#39;subject&#39;: &#39;ACTOR:RZ&#39;, &#39;predicate&#39;: &#39;Directed&#39;, &#39;object&#39;: &#39;MOVIE:BTTF&#39;, &#39;date&#39;: 1985}, instance_index=0, instantiates=&#39;Directed&#39;, context=[])]
</pre></div></div>
</div>
<p>We can also test referential integrity. By default, inserting an edge that points to a non-existent node will create a dangling node in Neo4j (Neo4j enforces that there must be some kind of node).</p>
<p>We will change the policy and try and insert a dangling edge</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linkml_store.api.stores.neo4j.neo4j_collection</span> <span class="kn">import</span> <span class="n">DeletePolicy</span>

<span class="n">edge_collection</span><span class="o">.</span><span class="n">delete_policy</span> <span class="o">=</span> <span class="n">DeletePolicy</span><span class="o">.</span><span class="n">ERROR</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">edge_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span> <span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">RZ</span><span class="p">,</span> <span class="s2">&quot;predicate&quot;</span><span class="p">:</span> <span class="s2">&quot;Directed&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="s2">&quot;MOVIE:MADE_UP_NODE&quot;</span><span class="p">})</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got an exception (we expect this!!!)&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Got an exception (we expect this!!!)
Node with identifier MOVIE:MADE_UP_NODE not found in the database.
</pre></div></div>
</div>
</section>
</section>
<section id="Loading-Data-from-a-file">
<h2>Loading Data from a file<a class="headerlink" href="#Loading-Data-from-a-file" title="Link to this heading"></a></h2>
<p>Loading data into a graph is very much like loading any other data into a LinkML schema. So long as you conform to the schema we defined above (which has defined graph projections), then it can be loaded into Neo4J.</p>
<p>Data could be combined in a single JSON file, but it’s also convenient to use tabular or dataframe-oriented formats.</p>
<p>Here we will load from CSV</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nodes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;input/movies_kg/nodes.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_dtypes</span><span class="p">()</span>
<span class="n">nodes_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>category</th>
      <th>name</th>
      <th>born</th>
      <th>released</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>PERSON:TH</td>
      <td>Actor</td>
      <td>Tom Hanks</td>
      <td>1956</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PERSON:RZ</td>
      <td>Director</td>
      <td>Robert Zemeckis</td>
      <td>1951</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PERSON:HW</td>
      <td>Actor</td>
      <td>Hugo Weaving</td>
      <td>1960</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PERSON:KR</td>
      <td>Actor</td>
      <td>Keanu Reeves</td>
      <td>1964</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PERSON:MJF</td>
      <td>Actor</td>
      <td>Michael J. Fox</td>
      <td>1961</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>5</th>
      <td>MOVIE:FG</td>
      <td>Movie</td>
      <td>Forrest Gump</td>
      <td>&lt;NA&gt;</td>
      <td>1994</td>
    </tr>
    <tr>
      <th>6</th>
      <td>MOVIE:TM</td>
      <td>Movie</td>
      <td>The Matrix</td>
      <td>&lt;NA&gt;</td>
      <td>1999</td>
    </tr>
    <tr>
      <th>7</th>
      <td>MOVIE:TM2</td>
      <td>Movie</td>
      <td>The Matrix Reloaded</td>
      <td>&lt;NA&gt;</td>
      <td>2003</td>
    </tr>
    <tr>
      <th>8</th>
      <td>MOVIE:TM3</td>
      <td>Movie</td>
      <td>The Matrix Revolutions</td>
      <td>&lt;NA&gt;</td>
      <td>2003</td>
    </tr>
    <tr>
      <th>9</th>
      <td>MOVIE:BTTF</td>
      <td>Movie</td>
      <td>Back to the Future</td>
      <td>&lt;NA&gt;</td>
      <td>1985</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edges_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;input/movies_kg/edges.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_dtypes</span><span class="p">()</span>
<span class="n">edges_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject</th>
      <th>predicate</th>
      <th>object</th>
      <th>plays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>PERSON:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:Forrest</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PERSON:RZ</td>
      <td>Directed</td>
      <td>MOVIE:FG</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PERSON:RZ</td>
      <td>Directed</td>
      <td>MOVIE:BTTF</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PERSON:KR</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:Neo</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PERSON:MJF</td>
      <td>ActedIn</td>
      <td>MOVIE:BTTF</td>
      <td>CHARACTER:MartyMcFly</td>
    </tr>
    <tr>
      <th>5</th>
      <td>PERSON:HW</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:AgentSmith</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">nodes_df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO: use type designator in validation</span>
<span class="n">edge_collection</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">validate_modifications</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">edges_df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">draw_neo4j_graph</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Visualization of whole database&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/how-to_Use-Neo4j_39_0.png" src="../_images/how-to_Use-Neo4j_39_0.png" />
</div>
</div>
<p>The above display is a little cluttered.</p>
<p>If you are running this notebook locally you can head over to your neo4j and explore via interactive views like this:</p>
<img alt="neo4j screenshot of more edges" src="../_images/neo4j-screenshot-2.png" />
</section>
<section id="Queries">
<h2>Queries<a class="headerlink" href="#Queries" title="Link to this heading"></a></h2>
<p>The graph can be queried the same as any other database in linkml-store. Note that at this time we don’t expose a graph-oriented API, we instead expose everything as node or edge collections. This has some advantages and disadvantages. The goal is not to replace something like Cypher (you can and should of course just do Cypher queries over the underlying neoj4 database if and when you need to).</p>
<p>Let’s start by querying for the entire contents of both collections:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node_collection</span><span class="o">.</span><span class="n">find</span><span class="p">()</span><span class="o">.</span><span class="n">rows_dataframe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>id</th>
      <th>category</th>
      <th>born</th>
      <th>released</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Forest Gump</td>
      <td>MOVIE:FG</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Forest Gump (Character)</td>
      <td>CHARACTER:FGC</td>
      <td>Character</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Tom Hanks</td>
      <td>PERSON:TH</td>
      <td>Actor</td>
      <td>1956.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Robert Zemeckis</td>
      <td>PERSON:RZ</td>
      <td>Director</td>
      <td>1951.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Hugo Weaving</td>
      <td>PERSON:HW</td>
      <td>Actor</td>
      <td>1960.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Keanu Reeves</td>
      <td>PERSON:KR</td>
      <td>Actor</td>
      <td>1964.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Michael J. Fox</td>
      <td>PERSON:MJF</td>
      <td>Actor</td>
      <td>1961.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Forrest Gump</td>
      <td>MOVIE:FG</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>1994.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Back to the Future</td>
      <td>MOVIE:BTTF</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>1985.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Tom Hanks</td>
      <td>ACTOR:TH</td>
      <td>Actor</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10</th>
      <td>The Matrix</td>
      <td>MOVIE:TM</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Robert Zemekis</td>
      <td>ACTOR:RZ</td>
      <td>Director</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>12</th>
      <td>The Matrix Reloaded</td>
      <td>MOVIE:TM2</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>2003.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>The Matrix Revolutions</td>
      <td>MOVIE:TM3</td>
      <td>Movie</td>
      <td>NaN</td>
      <td>2003.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_collection</span><span class="o">.</span><span class="n">find</span><span class="p">()</span><span class="o">.</span><span class="n">rows_dataframe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject</th>
      <th>predicate</th>
      <th>object</th>
      <th>plays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACTOR:RZ</td>
      <td>Directed</td>
      <td>MOVIE:FG</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ACTOR:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:FGC</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PERSON:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:Forrest</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PERSON:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:Forrest</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PERSON:RZ</td>
      <td>Directed</td>
      <td>MOVIE:FG</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>PERSON:RZ</td>
      <td>Directed</td>
      <td>MOVIE:FG</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>PERSON:RZ</td>
      <td>Directed</td>
      <td>MOVIE:BTTF</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>PERSON:KR</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:Neo</td>
    </tr>
    <tr>
      <th>8</th>
      <td>PERSON:MJF</td>
      <td>ActedIn</td>
      <td>MOVIE:BTTF</td>
      <td>CHARACTER:MartyMcFly</td>
    </tr>
    <tr>
      <th>9</th>
      <td>PERSON:HW</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:AgentSmith</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can also use standard key-value mongodb-like queries; over nodes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node_collection</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Actor&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">rows_dataframe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>born</th>
      <th>name</th>
      <th>id</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1956.0</td>
      <td>Tom Hanks</td>
      <td>PERSON:TH</td>
      <td>Actor</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1960.0</td>
      <td>Hugo Weaving</td>
      <td>PERSON:HW</td>
      <td>Actor</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1964.0</td>
      <td>Keanu Reeves</td>
      <td>PERSON:KR</td>
      <td>Actor</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1961.0</td>
      <td>Michael J. Fox</td>
      <td>PERSON:MJF</td>
      <td>Actor</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>Tom Hanks</td>
      <td>ACTOR:TH</td>
      <td>Actor</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>over edges:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_collection</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;predicate&quot;</span><span class="p">:</span> <span class="s2">&quot;ActedIn&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">rows_dataframe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject</th>
      <th>predicate</th>
      <th>object</th>
      <th>plays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACTOR:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:FGC</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PERSON:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:Forrest</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PERSON:TH</td>
      <td>ActedIn</td>
      <td>MOVIE:FG</td>
      <td>CHARACTER:Forrest</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PERSON:KR</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:Neo</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PERSON:MJF</td>
      <td>ActedIn</td>
      <td>MOVIE:BTTF</td>
      <td>CHARACTER:MartyMcFly</td>
    </tr>
    <tr>
      <th>5</th>
      <td>PERSON:HW</td>
      <td>ActedIn</td>
      <td>MOVIE:TM</td>
      <td>CHARACTER:AgentSmith</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Facet-Counts">
<h2>Facet Counts<a class="headerlink" href="#Facet-Counts" title="Link to this heading"></a></h2>
<p>We can also do basic analytic queries such as Solr-style facet grouping and counting.</p>
<p>We’ll make use of a lightweight function that converts linkml-store facet counts to dataframes:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linkml_store.utils.pandas_utils</span> <span class="kn">import</span> <span class="n">facet_summary_to_dataframe_unmelted</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">node_collection</span><span class="o">.</span><span class="n">query_facets</span><span class="p">(</span><span class="n">facet_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">])</span>
<span class="n">facet_summary_to_dataframe_unmelted</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>category</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Movie</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Actor</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Director</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Character</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO: implement facet counts for edges</span>
<span class="c1">#r = edge_collection.query_facets(facet_columns=[&quot;subject&quot;, &quot;predicate&quot;, &quot;object&quot;])</span>
<span class="c1">#facet_summary_to_dataframe_unmelted(r)</span>
</pre></div>
</div>
</div>
</section>
<section id="Indexing-via-LLM-embeddings">
<h2>Indexing via LLM embeddings<a class="headerlink" href="#Indexing-via-LLM-embeddings" title="Link to this heading"></a></h2>
<p>Neo4j can be indexed and search via LLM embeddings, just like any other linkml-store wrapped database.</p>
<p><strong>TODO</strong> show examples</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Check-Referential-Integrity.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">How to Check Referential Integrity</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="Query-Solr-using-CLI.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">How to query Solr using the Command Line</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Author 1 &lt;author@org.org&gt;
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How to use Neo4J with LinkML-Store</a><ul>
<li><a class="reference internal" href="#Running-this-how-to-guide-interactively.">Running this how-to guide interactively.</a></li>
<li><a class="reference internal" href="#Using-a-schema">Using a schema</a></li>
<li><a class="reference internal" href="#Create-Node-and-Edge-collections">Create Node and Edge collections</a></li>
<li><a class="reference internal" href="#Adding-Data">Adding Data</a></li>
<li><a class="reference internal" href="#Visualization">Visualization</a><ul>
<li><a class="reference internal" href="#Exploring-in-Neo4j">Exploring in Neo4j</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Validation">Validation</a><ul>
<li><a class="reference internal" href="#Validating-an-existing-database">Validating an existing database</a></li>
<li><a class="reference internal" href="#Prospective-Validation">Prospective Validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Loading-Data-from-a-file">Loading Data from a file</a></li>
<li><a class="reference internal" href="#Queries">Queries</a></li>
<li><a class="reference internal" href="#Facet-Counts">Facet Counts</a></li>
<li><a class="reference internal" href="#Indexing-via-LLM-embeddings">Indexing via LLM embeddings</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>