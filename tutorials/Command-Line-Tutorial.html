<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="../about.html" /><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Tutorial: Using the Python API" href="Python-Tutorial.html" /><link rel="prev" title="Tutorials" href="index.html" />

    <link rel="shortcut icon" href="https://linkml.io/uploads/linkml-logo_color-no-words.png"/><!-- Generated with Sphinx 7.3.7 and Furo 2024.04.27 -->
        <title>Tutorial: Using the Command Line Interface - linkml-store documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=437aa6ec" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">linkml-store  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="https://linkml.io/uploads/linkml-logo_color.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">linkml-store  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Tutorial: Using the Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python-Tutorial.html">Tutorial: Using the Python API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-to/index.html">How-To Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of How-To Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Use-MongoDB.html">How to use MongoDB with LinkML-Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Use-Semantic-Search.html">How to use Semantic Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Query-the-Monarch-KG.html">How to query the Monarch-KG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Query-Solr-using-CLI.html">How to query Solr using the Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Check-Referential-Integrity.html">How to Check Referential Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/Store-an-Ontology.html">Example: Storing an ontology</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/modules.html">linkml_store</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of linkml_store</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="Tutorial:-Using-the-Command-Line-Interface">
<h1>Tutorial: Using the Command Line Interface<a class="headerlink" href="#Tutorial:-Using-the-Command-Line-Interface" title="Link to this heading"></a></h1>
<p>This tutorial walks through usage of LinkML-Store via the Command Line Interface (CLI)</p>
<p>This tutorial is a Jupyter notebook: it can be executed in a command line environment, or you can try it for yourself by running commands directly.</p>
<p>Note the <code class="docutils literal notranslate"><span class="pre">%%bash</span></code> is a directive for Jupyter itself, you don’t need to type this</p>
<section id="Top-level-command">
<h2>Top level command<a class="headerlink" href="#Top-level-command" title="Link to this heading"></a></h2>
<p>The top level command is <code class="docutils literal notranslate"><span class="pre">linkml-store</span></code>. This command doesn’t do anything itself, instead there are various <em>subcommands</em>.</p>
<p>The store command has a few <em>global options</em> to specify configuration/database/collection</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: linkml-store [OPTIONS] COMMAND [ARGS]...

  A CLI for interacting with the linkml-store.

Options:
  -d, --database TEXT             Database name
  -c, --collection TEXT           Collection name
  -C, --config PATH               Path to the configuration file
  -v, --verbose
  -q, --quiet / --no-quiet
  --stacktrace / --no-stacktrace  If set then show full stacktrace on error
                                  [default: no-stacktrace]
  --help                          Show this message and exit.

Commands:
  fq                Query facets from the specified collection.
  index             Create an index over a collection.
  indexes
  insert            Insert objects from files (JSON, YAML, TSV) into the...
  list-collections
  query             Query objects from the specified collection.
  schema            Show the schema for a database
  search            Search objects in the specified collection.
  validate          Validate objects in the specified collection.
</pre></div></div>
</div>
</section>
<section id="Inserting-objects-from-a-file">
<h2>Inserting objects from a file<a class="headerlink" href="#Inserting-objects-from-a-file" title="Link to this heading"></a></h2>
<p>Next we’ll explore the <code class="docutils literal notranslate"><span class="pre">insert</span></code> command:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--stacktrace<span class="w"> </span>insert<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: linkml-store insert [OPTIONS] [FILES]...

  Insert objects from files (JSON, YAML, TSV) into the specified collection.

Options:
  -f, --format [json|jsonl|yaml|tsv|csv]
                                  Input format
  -i, --object TEXT               Input object as YAML
  --help                          Show this message and exit.
</pre></div></div>
</div>
<p>We’ll insert a small test file (in JSON Lines format) into a fresh database.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
head<span class="w"> </span>../../tests/input/countries/countries.jsonl
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#34;name&#34;: &#34;United States&#34;, &#34;code&#34;: &#34;US&#34;, &#34;capital&#34;: &#34;Washington, D.C.&#34;, &#34;continent&#34;: &#34;North America&#34;, &#34;languages&#34;: [&#34;English&#34;]}
{&#34;name&#34;: &#34;Canada&#34;, &#34;code&#34;: &#34;CA&#34;, &#34;capital&#34;: &#34;Ottawa&#34;, &#34;continent&#34;: &#34;North America&#34;, &#34;languages&#34;: [&#34;English&#34;, &#34;French&#34;]}
{&#34;name&#34;: &#34;Mexico&#34;, &#34;code&#34;: &#34;MX&#34;, &#34;capital&#34;: &#34;Mexico City&#34;, &#34;continent&#34;: &#34;North America&#34;, &#34;languages&#34;: [&#34;Spanish&#34;]}
{&#34;name&#34;: &#34;Brazil&#34;, &#34;code&#34;: &#34;BR&#34;, &#34;capital&#34;: &#34;Brasília&#34;, &#34;continent&#34;: &#34;South America&#34;, &#34;languages&#34;: [&#34;Portuguese&#34;]}
{&#34;name&#34;: &#34;Argentina&#34;, &#34;code&#34;: &#34;AR&#34;, &#34;capital&#34;: &#34;Buenos Aires&#34;, &#34;continent&#34;: &#34;South America&#34;, &#34;languages&#34;: [&#34;Spanish&#34;]}
{&#34;name&#34;: &#34;United Kingdom&#34;, &#34;code&#34;: &#34;GB&#34;, &#34;capital&#34;: &#34;London&#34;, &#34;continent&#34;: &#34;Europe&#34;, &#34;languages&#34;: [&#34;English&#34;]}
{&#34;name&#34;: &#34;France&#34;, &#34;code&#34;: &#34;FR&#34;, &#34;capital&#34;: &#34;Paris&#34;, &#34;continent&#34;: &#34;Europe&#34;, &#34;languages&#34;: [&#34;French&#34;]}
{&#34;name&#34;: &#34;Germany&#34;, &#34;code&#34;: &#34;DE&#34;, &#34;capital&#34;: &#34;Berlin&#34;, &#34;continent&#34;: &#34;Europe&#34;, &#34;languages&#34;: [&#34;German&#34;]}
{&#34;name&#34;: &#34;Italy&#34;, &#34;code&#34;: &#34;IT&#34;, &#34;capital&#34;: &#34;Rome&#34;, &#34;continent&#34;: &#34;Europe&#34;, &#34;languages&#34;: [&#34;Italian&#34;]}
{&#34;name&#34;: &#34;Spain&#34;, &#34;code&#34;: &#34;ES&#34;, &#34;capital&#34;: &#34;Madrid&#34;, &#34;continent&#34;: &#34;Europe&#34;, &#34;languages&#34;: [&#34;Spanish&#34;]}
</pre></div></div>
</div>
<p>To make sure we have a fresh setup, we’ll create a temporary directory <code class="docutils literal notranslate"><span class="pre">tmp</span></code> (if it doesn’t already exist), and be sure to remove any copy of the database we intend to create.</p>
<p>We’ll then insert the objects:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
mkdir<span class="w"> </span>-p<span class="w"> </span>tmp
rm<span class="w"> </span>-rf<span class="w"> </span>tmp/countries.db
linkml-store<span class="w"> </span>--database<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>--collection<span class="w"> </span>countries<span class="w"> </span>insert<span class="w"> </span>../../tests/input/countries/countries.jsonl
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 20 objects from ../../tests/input/countries/countries.jsonl into collection &#39;countries&#39;.
</pre></div></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">--database</span></code> and <code class="docutils literal notranslate"><span class="pre">--collection</span></code> options come <em>before</em> the <code class="docutils literal notranslate"><span class="pre">insert</span></code> subcommand.</p>
<p>With LinkML-Store, everything must go into a collection, so we specified <code class="docutils literal notranslate"><span class="pre">countries</span></code> as the name</p>
</section>
<section id="Querying">
<h2>Querying<a class="headerlink" href="#Querying" title="Link to this heading"></a></h2>
<p>Let’s query for all objects that have <code class="docutils literal notranslate"><span class="pre">code=&quot;GB&quot;</span></code>, and get the results back as a CSV</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--database<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s2">&quot;code: GB&quot;</span><span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name,code,capital,continent,languages
United Kingdom,GB,London,Europe,[&#39;English&#39;]
</pre></div></div>
</div>
</section>
<section id="Facet-Counts">
<h2>Facet Counts<a class="headerlink" href="#Facet-Counts" title="Link to this heading"></a></h2>
<p>You can combine any query (including an empty query, for fetching the whole database) with a <em>facet query</em> which fetches counts for numbers of objects broken down by some specified slot or slots.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>fq<span class="w"> </span>-S<span class="w"> </span>continent
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;continent&#34;: {
    &#34;Asia&#34;: 5,
    &#34;Europe&#34;: 5,
    &#34;Africa&#34;: 3,
    &#34;North America&#34;: 3,
    &#34;Oceania&#34;: 2,
    &#34;South America&#34;: 2
  }
}
</pre></div></div>
</div>
<p>Remember this is a test dataset deliberately reduced so we don’t expect to see all countries there!</p>
</section>
<section id="Search">
<h2>Search<a class="headerlink" href="#Search" title="Link to this heading"></a></h2>
<p>LinkML-Store is intended to allow for a flexible range of <em>search strategies</em>. Some of these may come from the underlying data store (for example, SOLr or ES is backed by Lucene indexing). Or they may be integrated orthogonally.</p>
<p>A key search mechanism that is supported is <em>text embedding</em> via <em>Large Language Models (LLMs)</em>. Note these are not enabled by default.</p>
<p>Currently the default mechanism (which works regardless of the underlying store) is a highly naive trigram-based vector embedding. This requires no external model. It is intended primarily for demonstration purposes, and should be swapped out for something else.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>index
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>search<span class="w"> </span><span class="s2">&quot;countries in the North where both english and french spoken&quot;</span><span class="w"> </span>--limit<span class="w"> </span><span class="m">5</span><span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
score,name,code,capital,continent,languages
0.15670402880167877,Canada,CA,Ottawa,North America,&#34;[&#39;English&#39;, &#39;French&#39;]&#34;
0.14806601565681218,South Africa,ZA,Pretoria,Africa,&#34;[&#39;Zulu&#39;, &#39;Xhosa&#39;, &#39;Afrikaans&#39;, &#39;English&#39;, &#39;Northern Sotho&#39;, &#39;Tswana&#39;, &#39;Southern Sotho&#39;, &#39;Tsonga&#39;, &#39;Swazi&#39;, &#39;Venda&#39;, &#39;Southern Ndebele&#39;]&#34;
0.13749236361227862,United States,US,&#34;Washington, D.C.&#34;,North America,[&#39;English&#39;]
0.09860812114511587,Argentina,AR,Buenos Aires,South America,[&#39;Spanish&#39;]
0.09765536333140983,Mexico,MX,Mexico City,North America,[&#39;Spanish&#39;]
</pre></div></div>
</div>
<p>By default, all fields in the object are indexed. Canada comes out top as the strings for English and France are present (or rather trigrams from those words). But remember the default method is just for illustration!</p>
</section>
<section id="Indexing-using-an-LLM">
<h2>Indexing using an LLM<a class="headerlink" href="#Indexing-using-an-LLM" title="Link to this heading"></a></h2>
<p>Note for this to work, you need to have installed this package with the <code class="docutils literal notranslate"><span class="pre">llm</span></code> extra, like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>linkml-store<span class="o">[</span>llm<span class="o">]</span>
</pre></div>
</div>
<p>Or if you have this repo checked out and are using Poetry:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>install<span class="w"> </span>--all-extras
</pre></div>
</div>
<p>You will also need an OpenAI account.</p>
<p>If this is too much, you can just skip this section!</p>
<p><strong>TODO</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
<section id="Schemas">
<h2>Schemas<a class="headerlink" href="#Schemas" title="Link to this heading"></a></h2>
<p>Note in the above we did not explicitly specify a schema; instead it is <em>induced</em>.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">schema</span></code> command to see the induced schema in <a class="reference external" href="https://linkml.github.io/linkml/">LinkML YAML</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>schema
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name: test-schema
id: http://example.org/test-schema
imports:
- linkml:types
prefixes:
  linkml:
    prefix_prefix: linkml
    prefix_reference: https://w3id.org/linkml/
  test_schema:
    prefix_prefix: test_schema
    prefix_reference: http://example.org/test-schema/
default_prefix: test_schema
default_range: string
classes:
  countries:
    name: countries
    attributes:
      name:
        name: name
        multivalued: false
        range: string
        required: false
      code:
        name: code
        multivalued: false
        range: string
        required: false
      capital:
        name: capital
        multivalued: false
        range: string
        required: false
      continent:
        name: continent
        multivalued: false
        range: string
        required: false
      languages:
        name: languages
        multivalued: true
        range: string
        required: false
  internal__index__countries__test:
    name: internal__index__countries__test
    attributes:
      name:
        name: name
        multivalued: false
        range: string
        required: false
      code:
        name: code
        multivalued: false
        range: string
        required: false
      capital:
        name: capital
        multivalued: false
        range: string
        required: false
      continent:
        name: continent
        multivalued: false
        range: string
        required: false
      languages:
        name: languages
        multivalued: true
        range: string
        required: false
      __index__:
        name: __index__
        multivalued: true
        range: string
        required: false
</pre></div></div>
</div>
</section>
<section id="Configuration-Files-and-Explicit-Schemas">
<h2>Configuration Files and Explicit Schemas<a class="headerlink" href="#Configuration-Files-and-Explicit-Schemas" title="Link to this heading"></a></h2>
<p>Rather than repeat <code class="docutils literal notranslate"><span class="pre">--database</span></code> and <code class="docutils literal notranslate"><span class="pre">--collection</span></code> each time, we can make use of YAML config files.</p>
<p>These can also package useful information and schemas.</p>
<p>First we will create a fresh copy of a directory with both configuration files and schemas:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cp<span class="w"> </span>-pr<span class="w"> </span>../../tests/input/countries<span class="w"> </span>tmp
rm<span class="w"> </span>tmp/countries/countries.db
</pre></div>
</div>
</div>
<p>The configuration YAML is fairly minimal - it specifies a single database with a single collection, and a pointer to a schema</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cat<span class="w"> </span>tmp/countries/countries.config.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
databases:
  countries_db:
    handle: &#34;duckdb:///{base_dir}/countries.db&#34;
    schema_location: &#34;{base_dir}/countries.linkml.yaml&#34;
    collections:
      countries:
        type: Country
</pre></div></div>
</div>
<p>The schema itself is fairly basic - a single class (whose name matches the <code class="docutils literal notranslate"><span class="pre">type</span></code>) in the configuration, with some slots. Note the slots have some constraints, e.g. regexps</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cat<span class="w"> </span>tmp/countries/countries.linkml.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: https://example.org/countries
name: countries
description: A schema for representing countries
license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  countries: https://example.org/countries/
  linkml: https://w3id.org/linkml/

default_prefix: countries
default_range: string

imports:
  - linkml:types

classes:
  Country:
    description: A sovereign state
    slots:
      - name
      - code
      - capital
      - continent
      - languages

slots:
  name:
    description: The name of the country
    required: true
    identifier: true
  code:
    description: The ISO 3166-1 alpha-2 code of the country
    required: true
    pattern: &#39;^[A-Z]{2}$&#39;
  capital:
    description: The capital city of the country
    required: true
  continent:
    description: The continent where the country is located
    required: true
  languages:
    description: The main languages spoken in the country
    range: Language
    multivalued: true

types:
  Language:
    typeof: string
    description: A human language
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w">  </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>insert<span class="w"> </span>tmp/countries/countries.jsonl
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 20 objects from tmp/countries/countries.jsonl into collection &#39;countries&#39;.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>list-collections
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
countries
name: countries
alias: null
type: Country
metadata: null
attributes: null
indexers: null
hidden: false
is_prepopulated: false
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--stacktrace<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s2">&quot;code: GB&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[
  {
    &#34;name&#34;: &#34;United Kingdom&#34;,
    &#34;code&#34;: &#34;GB&#34;,
    &#34;capital&#34;: &#34;London&#34;,
    &#34;continent&#34;: &#34;Europe&#34;,
    &#34;languages&#34;: [
      &#34;English&#34;
    ]
  }
]
</pre></div></div>
</div>
</section>
<section id="Validation">
<h2>Validation<a class="headerlink" href="#Validation" title="Link to this heading"></a></h2>
<p>LinkML-Store is designed to allow for rich validation, regardless of the underlying database store used.</p>
<p>For validation to work, we need to specify an explicit schema, as we have done with the configuration above.</p>
<p>To test it, we will insert some fake data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>insert<span class="w"> </span>--object<span class="w"> </span><span class="s1">&#39;{name: Foolandia, code: &quot;X Y&quot;, languages: [&quot;Fooish&quot;]}&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 3 objects from {name: Foolandia, code: &#34;X Y&#34;, languages: [&#34;Fooish&#34;]} into collection &#39;countries&#39;.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>list-collections
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
countries
name: countries
alias: null
type: Country
metadata: null
attributes: null
indexers: null
hidden: false
is_prepopulated: false
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s1">&#39;name: Foolandia&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[
  {
    &#34;name&#34;: &#34;Foolandia&#34;,
    &#34;code&#34;: &#34;X Y&#34;,
    &#34;capital&#34;: null,
    &#34;continent&#34;: null,
    &#34;languages&#34;: [
      &#34;Fooish&#34;
    ]
  }
]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>schema
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name: countries
description: A schema for representing countries
id: https://example.org/countries
imports:
- linkml:types
license: https://creativecommons.org/publicdomain/zero/1.0/
prefixes:
  countries:
    prefix_prefix: countries
    prefix_reference: https://example.org/countries/
  linkml:
    prefix_prefix: linkml
    prefix_reference: https://w3id.org/linkml/
default_prefix: countries
default_range: string
types:
  Language:
    name: Language
    description: A human language
    typeof: string
slots:
  name:
    name: name
    description: The name of the country
    identifier: true
    required: true
  code:
    name: code
    description: The ISO 3166-1 alpha-2 code of the country
    required: true
    pattern: ^[A-Z]{2}$
  capital:
    name: capital
    description: The capital city of the country
    required: true
  continent:
    name: continent
    description: The continent where the country is located
    required: true
  languages:
    name: languages
    description: The main languages spoken in the country
    multivalued: true
    range: Language
classes:
  Country:
    name: Country
    description: A sovereign state
    slots:
    - name
    - code
    - capital
    - continent
    - languages
source_file: tmp/countries/countries.linkml.yaml
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>validate<span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
type,severity,message,instance,instance_index,instantiates
jsonschema validation,ERROR,&#39;X Y&#39; does not match &#39;^[A-Z]{2}$&#39; in /code,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
jsonschema validation,ERROR,None is not of type &#39;string&#39; in /capital,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
jsonschema validation,ERROR,None is not of type &#39;string&#39; in /continent,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
</pre></div></div>
</div>
<p>Here we can see 3 issues with the data we added:</p>
<ul class="simple">
<li><p>the code doesn’t match the regexp we provided (it has a space)</p></li>
<li><p>the capital is missing</p></li>
<li><p>the continent is missing</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Python-Tutorial.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Tutorial: Using the Python API</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Tutorials</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Author 1 &lt;author@org.org&gt;
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial: Using the Command Line Interface</a><ul>
<li><a class="reference internal" href="#Top-level-command">Top level command</a></li>
<li><a class="reference internal" href="#Inserting-objects-from-a-file">Inserting objects from a file</a></li>
<li><a class="reference internal" href="#Querying">Querying</a></li>
<li><a class="reference internal" href="#Facet-Counts">Facet Counts</a></li>
<li><a class="reference internal" href="#Search">Search</a></li>
<li><a class="reference internal" href="#Indexing-using-an-LLM">Indexing using an LLM</a></li>
<li><a class="reference internal" href="#Schemas">Schemas</a></li>
<li><a class="reference internal" href="#Configuration-Files-and-Explicit-Schemas">Configuration Files and Explicit Schemas</a></li>
<li><a class="reference internal" href="#Validation">Validation</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>