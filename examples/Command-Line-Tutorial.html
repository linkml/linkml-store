<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial: Using LinkML-Store using the Command Line Interface &mdash; linkml-store  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial: LinkML-Store via Python" href="Python-Tutorial.html" />
    <link rel="prev" title="Welcome to the linkml-store documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            linkml-store
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial: Using LinkML-Store using the Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Top-level-command">Top level command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Inserting-objects-from-a-file">Inserting objects from a file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Querying">Querying</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Facet-Counts">Facet Counts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Search">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Indexing-using-an-LLM">Indexing using an LLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Introspecting-schemas">Introspecting schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Configuration-Files-and-Explicit-Schemas">Configuration Files and Explicit Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Validation">Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Python-Tutorial.html">Tutorial: LinkML-Store via Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Semantic-Search.html">Semantic Search tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Monarch-KG.html">Example: Monarch-KG notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">linkml_store</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">linkml-store</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial: Using LinkML-Store using the Command Line Interface</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/Command-Line-Tutorial.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Tutorial:-Using-LinkML-Store-using-the-Command-Line-Interface">
<h1>Tutorial: Using LinkML-Store using the Command Line Interface<a class="headerlink" href="#Tutorial:-Using-LinkML-Store-using-the-Command-Line-Interface" title="Link to this heading"></a></h1>
<p>This tutorial walks through usage of LinkML-Store via the Command Line Interface (CLI)</p>
<p>This tutorial is a Jupyter notebook: it can be executed in a command line environment, or you can try it for yourself by running commands directly.</p>
<p>Note the <code class="docutils literal notranslate"><span class="pre">%%bash</span></code> is a directive for Jupyter itself, you don’t need to type this</p>
<section id="Top-level-command">
<h2>Top level command<a class="headerlink" href="#Top-level-command" title="Link to this heading"></a></h2>
<p>The top level command is <code class="docutils literal notranslate"><span class="pre">linkml-store</span></code>. This command doesn’t do anything itself, instead there are various <em>subcommands</em>.</p>
<p>The store command has a few <em>global options</em> to specify configuration/database/collection</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: linkml-store [OPTIONS] COMMAND [ARGS]...

  A CLI for interacting with the linkml-store.

Options:
  -d, --database TEXT             Database name
  -c, --collection TEXT           Collection name
  -C, --config PATH               Path to the configuration file
  -v, --verbose
  -q, --quiet / --no-quiet
  --stacktrace / --no-stacktrace  If set then show full stacktrace on error
                                  [default: no-stacktrace]
  --help                          Show this message and exit.

Commands:
  fq                Query facets from the specified collection.
  index             Create an index over a collection.
  indexes
  insert            Insert objects from files (JSON, YAML, TSV) into the...
  list-collections
  query             Query objects from the specified collection.
  schema            Show the schema for a database
  search            Search objects in the specified collection.
  validate          Validate objects in the specified collection.
</pre></div></div>
</div>
</section>
<section id="Inserting-objects-from-a-file">
<h2>Inserting objects from a file<a class="headerlink" href="#Inserting-objects-from-a-file" title="Link to this heading"></a></h2>
<p>Next we’ll explore the <code class="docutils literal notranslate"><span class="pre">insert</span></code> command:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--stacktrace<span class="w"> </span>insert<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: linkml-store insert [OPTIONS] [FILES]...

  Insert objects from files (JSON, YAML, TSV) into the specified collection.

Options:
  -f, --format [json|jsonl|yaml|tsv|csv]
                                  Input format
  -i, --object TEXT               Input object as YAML
  --help                          Show this message and exit.
</pre></div></div>
</div>
<p>We’ll insert a small test file (in JSON Lines format) into a fresh database.</p>
<p>To make sure we have a fresh setup, we’ll create a temporary directory <code class="docutils literal notranslate"><span class="pre">tmp</span></code> (if it doesn’t already exist), and be sure to remove any copy of the database we intend to create.</p>
<p>We’ll then insert the objects:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
mkdir<span class="w"> </span>-p<span class="w"> </span>tmp
rm<span class="w"> </span>-rf<span class="w"> </span>tmp/countries.db
linkml-store<span class="w"> </span>--database<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>--collection<span class="w"> </span>countries<span class="w"> </span>insert<span class="w"> </span>../../tests/input/countries/countries.jsonl
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 20 objects from ../../tests/input/countries/countries.jsonl into collection &#39;countries&#39;.
</pre></div></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">--database</span></code> and <code class="docutils literal notranslate"><span class="pre">--collection</span></code> options come <em>before</em> the <code class="docutils literal notranslate"><span class="pre">insert</span></code> subcommand.</p>
<p>With LinkML-Store, everything must go into a collection, so we specified <code class="docutils literal notranslate"><span class="pre">countries</span></code> as the name</p>
</section>
<section id="Querying">
<h2>Querying<a class="headerlink" href="#Querying" title="Link to this heading"></a></h2>
<p>Let’s query for all objects that have <code class="docutils literal notranslate"><span class="pre">code=&quot;GB&quot;</span></code>, and get the results back as a CSV</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--database<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s2">&quot;code: GB&quot;</span><span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name,code,capital,continent,languages
United Kingdom,GB,London,Europe,[&#39;English&#39;]
</pre></div></div>
</div>
</section>
<section id="Facet-Counts">
<h2>Facet Counts<a class="headerlink" href="#Facet-Counts" title="Link to this heading"></a></h2>
<p>You can combine any query (including an empty query, for fetching the whole database) with a <em>facet query</em> which fetches counts for numbers of objects broken down by some specified slot or slots.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>fq<span class="w"> </span>-S<span class="w"> </span>continent
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;continent&#34;: {
    &#34;Asia&#34;: 5,
    &#34;Europe&#34;: 5,
    &#34;Africa&#34;: 3,
    &#34;North America&#34;: 3,
    &#34;Oceania&#34;: 2,
    &#34;South America&#34;: 2
  }
}
</pre></div></div>
</div>
<p>Remember this is a test dataset deliberately reduced so we don’t expect to see all countries there!</p>
</section>
<section id="Search">
<h2>Search<a class="headerlink" href="#Search" title="Link to this heading"></a></h2>
<p>LinkML-Store is intended to allow for a flexible range of <em>search strategies</em>. Some of these may come from the underlying data store (for example, SOLr or ES is backed by Lucene indexing). Or they may be integrated orthogonally.</p>
<p>A key search mechanism that is supported is <em>text embedding</em> via <em>Large Language Models (LLMs)</em>. Note these are not enabled by default.</p>
<p>Currently the default mechanism (which works regardless of the underlying store) is a highly naive trigram-based vector embedding. This requires no external model. It is intended primarily for demonstration purposes, and should be swapped out for something else.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>index
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>search<span class="w"> </span><span class="s2">&quot;countries in the North where both english and french spoken&quot;</span><span class="w"> </span>--limit<span class="w"> </span><span class="m">5</span><span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
score,name,code,capital,continent,languages
0.15670402880167877,Canada,CA,Ottawa,North America,&#34;[&#39;English&#39;, &#39;French&#39;]&#34;
0.14806601565681218,South Africa,ZA,Pretoria,Africa,&#34;[&#39;Zulu&#39;, &#39;Xhosa&#39;, &#39;Afrikaans&#39;, &#39;English&#39;, &#39;Northern Sotho&#39;, &#39;Tswana&#39;, &#39;Southern Sotho&#39;, &#39;Tsonga&#39;, &#39;Swazi&#39;, &#39;Venda&#39;, &#39;Southern Ndebele&#39;]&#34;
0.13749236361227862,United States,US,&#34;Washington, D.C.&#34;,North America,[&#39;English&#39;]
0.09860812114511587,Argentina,AR,Buenos Aires,South America,[&#39;Spanish&#39;]
0.09765536333140983,Mexico,MX,Mexico City,North America,[&#39;Spanish&#39;]
</pre></div></div>
</div>
<p>By default, all fields in the object are indexed. Canada comes out top as the strings for English and France are present (or rather trigrams from those words). But remember the default method is just for illustration!</p>
</section>
<section id="Indexing-using-an-LLM">
<h2>Indexing using an LLM<a class="headerlink" href="#Indexing-using-an-LLM" title="Link to this heading"></a></h2>
<p>Note for this to work, you need to have installed this package with the <code class="docutils literal notranslate"><span class="pre">llm</span></code> extra, like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>linkml-store<span class="o">[</span>llm<span class="o">]</span>
</pre></div>
</div>
<p>Or if you have this repo checked out and are using Poetry:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>install<span class="w"> </span>--all-extras
</pre></div>
</div>
<p>You will also need an OpenAI account.</p>
<p>If this is too much, you can just skip this section!</p>
<p><strong>TODO</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
<section id="Introspecting-schemas">
<h2>Introspecting schemas<a class="headerlink" href="#Introspecting-schemas" title="Link to this heading"></a></h2>
<p>Note in the above we did not explicitly specify a schema; instead it is <em>induced</em>.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">schema</span></code> command to see the induced schema in LinkML YAML:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-d<span class="w"> </span>duckdb:///tmp/countries.db<span class="w"> </span>schema
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name: test-schema
id: http://example.org/test-schema
imports:
- linkml:types
prefixes:
  linkml:
    prefix_prefix: linkml
    prefix_reference: https://w3id.org/linkml/
  test_schema:
    prefix_prefix: test_schema
    prefix_reference: http://example.org/test-schema/
default_prefix: test_schema
default_range: string
classes:
  countries:
    name: countries
    attributes:
      name:
        name: name
        multivalued: false
        range: string
        required: false
      code:
        name: code
        multivalued: false
        range: string
        required: false
      capital:
        name: capital
        multivalued: false
        range: string
        required: false
      continent:
        name: continent
        multivalued: false
        range: string
        required: false
      languages:
        name: languages
        multivalued: true
        range: string
        required: false
  internal__index__countries__test:
    name: internal__index__countries__test
    attributes:
      name:
        name: name
        multivalued: false
        range: string
        required: false
      code:
        name: code
        multivalued: false
        range: string
        required: false
      capital:
        name: capital
        multivalued: false
        range: string
        required: false
      continent:
        name: continent
        multivalued: false
        range: string
        required: false
      languages:
        name: languages
        multivalued: true
        range: string
        required: false
      __index__:
        name: __index__
        multivalued: true
        range: string
        required: false
</pre></div></div>
</div>
</section>
<section id="Configuration-Files-and-Explicit-Schemas">
<h2>Configuration Files and Explicit Schemas<a class="headerlink" href="#Configuration-Files-and-Explicit-Schemas" title="Link to this heading"></a></h2>
<p>Rather than repeat <code class="docutils literal notranslate"><span class="pre">--database</span></code> and <code class="docutils literal notranslate"><span class="pre">--collection</span></code> each time, we can make use of YAML config files.</p>
<p>These can also package useful information and schemas.</p>
<p>First we will create a fresh copy of a directory with both configuration files and schemas:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cp<span class="w"> </span>-pr<span class="w"> </span>../../tests/input/countries<span class="w"> </span>tmp
rm<span class="w"> </span>tmp/countries/countries.db
</pre></div>
</div>
</div>
<p>The configuration YAML is fairly minimal - it specifies a single database with a single collection, and a pointer to a schema</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cat<span class="w"> </span>tmp/countries/countries.config.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
databases:
  countries_db:
    handle: &#34;duckdb:///{base_dir}/countries.db&#34;
    schema_location: &#34;{base_dir}/countries.linkml.yaml&#34;
    collections:
      countries:
        type: Country
</pre></div></div>
</div>
<p>The schema itself is fairly basic - a single class (whose name matches the <code class="docutils literal notranslate"><span class="pre">type</span></code>) in the configuration, with some slots. Note the slots have some constraints, e.g. regexps</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
cat<span class="w"> </span>tmp/countries/countries.linkml.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: https://example.org/countries
name: countries
description: A schema for representing countries
license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  countries: https://example.org/countries/
  linkml: https://w3id.org/linkml/

default_prefix: countries
default_range: string

imports:
  - linkml:types

classes:
  Country:
    description: A sovereign state
    slots:
      - name
      - code
      - capital
      - continent
      - languages

slots:
  name:
    description: The name of the country
    required: true
    identifier: true
  code:
    description: The ISO 3166-1 alpha-2 code of the country
    required: true
    pattern: &#39;^[A-Z]{2}$&#39;
  capital:
    description: The capital city of the country
    required: true
  continent:
    description: The continent where the country is located
    required: true
  languages:
    description: The main languages spoken in the country
    range: Language
    multivalued: true

types:
  Language:
    typeof: string
    description: A human language
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w">  </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>insert<span class="w"> </span>tmp/countries/countries.jsonl
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 20 objects from tmp/countries/countries.jsonl into collection &#39;countries&#39;.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>list-collections
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
countries
name: countries
alias: null
type: Country
metadata: null
attributes: null
indexers: null
hidden: false
is_prepopulated: false
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>--stacktrace<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>-c<span class="w"> </span>countries<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s2">&quot;code: GB&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[
  {
    &#34;name&#34;: &#34;United Kingdom&#34;,
    &#34;code&#34;: &#34;GB&#34;,
    &#34;capital&#34;: &#34;London&#34;,
    &#34;continent&#34;: &#34;Europe&#34;,
    &#34;languages&#34;: [
      &#34;English&#34;
    ]
  }
]
</pre></div></div>
</div>
</section>
<section id="Validation">
<h2>Validation<a class="headerlink" href="#Validation" title="Link to this heading"></a></h2>
<p>LinkML-Store is designed to allow for rich validation, regardless of the underlying database store used.</p>
<p>For validation to work, we need to specify an explicit schema, as we have done with the configuration above.</p>
<p>To test it, we will insert some fake data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>insert<span class="w"> </span>--object<span class="w"> </span><span class="s1">&#39;{name: Foolandia, code: &quot;X Y&quot;, languages: [&quot;Fooish&quot;]}&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Inserted 3 objects from {name: Foolandia, code: &#34;X Y&#34;, languages: [&#34;Fooish&#34;]} into collection &#39;countries&#39;.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>list-collections
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
countries
name: countries
alias: null
type: Country
metadata: null
attributes: null
indexers: null
hidden: false
is_prepopulated: false
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>query<span class="w"> </span>-w<span class="w"> </span><span class="s1">&#39;name: Foolandia&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[
  {
    &#34;name&#34;: &#34;Foolandia&#34;,
    &#34;code&#34;: &#34;X Y&#34;,
    &#34;capital&#34;: null,
    &#34;continent&#34;: null,
    &#34;languages&#34;: [
      &#34;Fooish&#34;
    ]
  }
]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>schema
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
name: countries
description: A schema for representing countries
id: https://example.org/countries
imports:
- linkml:types
license: https://creativecommons.org/publicdomain/zero/1.0/
prefixes:
  countries:
    prefix_prefix: countries
    prefix_reference: https://example.org/countries/
  linkml:
    prefix_prefix: linkml
    prefix_reference: https://w3id.org/linkml/
default_prefix: countries
default_range: string
types:
  Language:
    name: Language
    description: A human language
    typeof: string
slots:
  name:
    name: name
    description: The name of the country
    identifier: true
    required: true
  code:
    name: code
    description: The ISO 3166-1 alpha-2 code of the country
    required: true
    pattern: ^[A-Z]{2}$
  capital:
    name: capital
    description: The capital city of the country
    required: true
  continent:
    name: continent
    description: The continent where the country is located
    required: true
  languages:
    name: languages
    description: The main languages spoken in the country
    multivalued: true
    range: Language
classes:
  Country:
    name: Country
    description: A sovereign state
    slots:
    - name
    - code
    - capital
    - continent
    - languages
source_file: tmp/countries/countries.linkml.yaml
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre><span></span>%%bash
linkml-store<span class="w"> </span>-C<span class="w"> </span>tmp/countries/countries.config.yaml<span class="w"> </span>validate<span class="w"> </span>-O<span class="w"> </span>csv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
type,severity,message,instance,instance_index,instantiates
jsonschema validation,ERROR,&#39;X Y&#39; does not match &#39;^[A-Z]{2}$&#39; in /code,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
jsonschema validation,ERROR,None is not of type &#39;string&#39; in /capital,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
jsonschema validation,ERROR,None is not of type &#39;string&#39; in /continent,&#34;{&#39;name&#39;: &#39;Foolandia&#39;, &#39;code&#39;: &#39;X Y&#39;, &#39;capital&#39;: None, &#39;continent&#39;: None, &#39;languages&#39;: [&#39;Fooish&#39;]}&#34;,0,Country
</pre></div></div>
</div>
<p>Here we can see 3 issues with the data we added:</p>
<ul class="simple">
<li><p>the code doesn’t match the regexp we provided (it has a space)</p></li>
<li><p>the capital is missing</p></li>
<li><p>the continent is missing</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to the linkml-store documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Python-Tutorial.html" class="btn btn-neutral float-right" title="Tutorial: LinkML-Store via Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Author 1 &lt;author@org.org&gt;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>